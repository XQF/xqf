language: c

compiler:
  - clang
  - gcc

before_install:
  - sudo apt-get update -qq
  - sudo apt-get install -q -y qstat intltool
  - echo 'c2V0IC14CgojIGlmIHJlbGVhc2Ugb2xkZXIgdGhhbiB2aXZpZCAoMTUuMDQpCmlmIFsgIiQobHNiX3JlbGVhc2UgLXNyIHwgY3V0IC1jMS0yKSIgLWx0ICcxNScgXQp0aGVuCgoJIyBhZGQgdml2aWQgcmVwb3NpdG9yeSAobGlibWluaXppcC1kZXYgaXMgc2hpcGVkIGluIHVuaXZlcnNlKQoJY2F0ID4gJy9ldGMvYXB0L3NvdXJjZXMubGlzdC5kL3VidW50dS12aXZpZC1tYWluLmxpc3QnIDw8LUVPRgoJZGViIGh0dHA6Ly9hcmNoaXZlLnVidW50dS5jb20vdWJ1bnR1IHZpdmlkIHVuaXZlcnNlCglFT0YKCgkjIHBpbiB2aXZpZCByZXBvc2l0b3J5IHRvIGRpc2FibGUgcGFja2FnZSBpbnN0YWxsYXRpb24gZnJvbSB0aGlzIHJlcG9zaXRvcnkgYnkgZGVmYXVsdAoJY2F0ID4gJy9ldGMvYXB0L3ByZWZlcmVuY2VzLmQvdml2aWQtcGlubmluZycgPDwtRU9GCglQYWNrYWdlOiAqCglQaW46IHJlbGVhc2Ugbj12aXZpZAoJUGluLVByaW9yaXR5OiAtMTAwCglFT0YKCgkjIGFkZCB0aGUgdml2aWQgcmVwb3NpdG9yeSBrZXkKCWFwdC1rZXkgYWR2IC0tcmVjdi1rZXlzIC0ta2V5c2VydmVyIGtleXNlcnZlci51YnVudHUuY29tIDNCNEZFNkFDQzBCMjFGMzIKCgkjIHVwZGF0ZSB0aGUgcmVwb3NpdG9yaWVzCglhcHQtZ2V0IHVwZGF0ZSAtcXEKCgkjIGluc3RhbGwgbGlibWluaXppcC1kZXYgKGFuZCBkZXBlbmRlbmNpZXMpIGZyb20gdml2aWQKCWFwdC1nZXQgaW5zdGFsbCAteSAtcSAtdCB2aXZpZCBsaWJtaW5pemlwLWRldgpmaQo=' | base64 -d | sudo -s
  - ./autogen.sh

script:
  - ./configure --with-qstat=quakestat
  - make

notifications:
  irc: "chat.freenode.net#xqf"
  on_success: change
  on_failure: always
